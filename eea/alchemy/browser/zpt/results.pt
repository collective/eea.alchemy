<div>
  <form action="@@alchemy.results" method="post">
    <fieldset class="alchemy-box-results" tal:define="
      ctypes python:template.portal_types;
      total python:ctypes.next();">
      <legend i18n:translate=""
        tal:content="string:${total/title} (${total/token})" />
      <div class="alchemy-box-content">
      <ul>
        <tal:types repeat="term ctypes">
        <li>
          <input type="checkbox" checked="checked" tal:attributes="
            name string:portal_type;
            id python:term.value;
            title python:term.title;
            value python:term.value" />
          <label tal:attributes="
            for python:term.value;
            title python:term.title"
            tal:content="python:term.title" />
        </li>
        </tal:types>
      </ul>
      </div>
    </fieldset>

    <fieldset class="alchemy-box-results" tal:define="
        geotags python:template.geotags;
        total python:geotags.next()">
      <legend i18n:translate=""
        tal:content="string:${total/title} (${total/token})" />
      <div class="alchemy-box-content">
        <ul>
          <tal:schema repeat="term geotags">
          <li>
            <input type="checkbox" checked="checked" tal:attributes="
              name string:lookin;
              id python:term.value;
              title python:term.title;
              value python:term.value" />
            <label tal:attributes="
              for python:term.value;
              title python:term.title"
              tal:content="python:term.title + ' (%s)' % term.token" />
          </li>
          </tal:schema>
        </ul>
      </div>
    </fieldset>

    <fieldset class="alchemy-box-results" tal:define="
      timeline python:template.timeline;
      total python:timeline.next();">
      <legend i18n:translate=""
        tal:content="string:${total/title} (${total/token})" />
      <div class="alchemy-box-content">
        <ul>
          <tal:schema repeat="term timeline">
          <li>
            <input type="checkbox" checked="checked" tal:attributes="
              name string:discover;
              id python:term.value;
              title python:term.title;
              value python:term.value" />
            <label tal:attributes="
              for python:term.value;
              title python:term.title"
              tal:content="python:term.title + ' (%s)' % term.token" />
          </li>
          </tal:schema>
        </ul>
      </div>
    </fieldset>

    <fieldset class="alchemy-box-results" tal:define="
      keywords python:template.keywords;
      total python:keywords.next()">
      <legend i18n:translate=""
        tal:content="string:${total/title} (${total/token})" />
      <div class="alchemy-box-content">
        <ul>
          <tal:schema repeat="term keywords">
          <li>
            <input type="checkbox" checked="checked" tal:attributes="
              name string:discover;
              id python:term.value;
              title python:term.title;
              value python:term.value" />
            <label tal:attributes="
              for python:term.value;
              title python:term.title"
              tal:content="python:term.title + ' (%s)' % term.token " />
          </li>
          </tal:schema>
        </ul>
      </div>
    </fieldset>

    <div style="clear: both"> </div>

    <textarea name="results" id="results"
      tal:content="python:template.results('json')"></textarea>
    <div class="alchemy-button">
      <input type="submit" value="Apply" i18n:attributes="value" />
    </div>
  </form>
</div>
